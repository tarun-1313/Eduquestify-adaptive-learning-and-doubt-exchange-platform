/* Study + Gamified theme tokens and utilities (light/dark) */

/* Base tokens: 1 primary + 2 neutrals + 2 accents (max 5 colors) */
:root {
  /* neutrals */
  --color-background: 255 255 255; /* white */
  --color-foreground: 16 24 39; /* slate-900-ish */

  /* primary (calm study blue) */
  --color-primary: 29 78 216; /* blue-700 */

  /* accents */
  --color-accent-success: 16 185 129; /* emerald-500 for progress */
  --color-accent-reward: 245 158 11; /* amber-500 for rewards/coins */

  /* radius */
  --radius: 0.625rem;
}

.dark {
  --color-background: 9 14 22; /* near-950 */
  --color-foreground: 229 231 235; /* gray-200 */
  --color-primary: 59 130 246; /* blue-500 */
  --color-accent-success: 52 211 153; /* emerald-400 */
  --color-accent-reward: 251 191 36; /* amber-400 */
}

/* Map tokens to Tailwind v4 semantic variables */
@theme inline {
  --background: rgb(var(--color-background));
  --foreground: rgb(var(--color-foreground));

  --primary: rgb(var(--color-primary));
  --primary-foreground: rgb(255 255 255);

  --muted: color-mix(in oklab, var(--background), black 6%);
  --muted-foreground: color-mix(in oklab, var(--foreground), white 45%);

  --accent: rgb(var(--color-accent-success));
  --accent-foreground: rgb(255 255 255);

  --destructive: rgb(239 68 68);
  --destructive-foreground: rgb(255 255 255);

  --border: color-mix(in oklab, var(--foreground), white 85%);
  --input: var(--border);
  --ring: var(--primary);

  --radius: var(--radius);
}

/* Utilities for gamified learning UI */
.btn-primary {
  background: var(--primary);
  color: var(--primary-foreground);
  border-radius: var(--radius);
}
.btn-primary:hover {
  filter: brightness(1.05);
}

.badge {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  border-radius: calc(var(--radius) - 2px);
  background: color-mix(in oklab, var(--primary), white 85%);
  color: var(--foreground);
  padding: 0.25rem 0.5rem;
  font-weight: 600;
  font-size: 0.75rem;
}
.badge--xp {
  background: color-mix(in oklab, var(--accent), white 80%);
}
.badge--coin {
  background: color-mix(in oklab, var(--color-accent-reward), white 78%);
}

.progress-track {
  height: 0.5rem;
  background: color-mix(in oklab, var(--muted), black 5%);
  border-radius: 999px;
}
.progress-fill {
  height: 100%;
  background: var(--accent);
  border-radius: 999px;
  transition: width 300ms ease;
}

.hero {
  /* Darker surface for stronger contrast */
  background: color-mix(in oklab, var(--background), black 18%);
  border: 1px solid var(--border);
  border-radius: calc(var(--radius) + 2px);
}

.card {
  border: 1px solid var(--border);
  border-radius: var(--radius);
  /* Slightly darker than base to pop on light or dark */
  background: color-mix(in oklab, var(--background), black 10%);
}

.link {
  color: var(--primary);
}
.link:hover {
  text-decoration: underline;
}

hr.token-sep {
  border: 0;
  height: 1px;
  background: var(--border);
}

/* Study/gamified background utilities from your CSS brief, implemented with semantic tokens */

/* 1) Quest Map background: subtle parchment + faint nodes + pulsing paths */
.bg-quest-map {
  position: relative;
  background: radial-gradient(
      100% 100% at 50% 50%,
      color-mix(in oklab, var(--background), #bfa 2%),
      color-mix(in oklab, var(--background), black 4%)
    )
    fixed;
}
.bg-quest-map::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0.25;
  background-image: radial-gradient(
      circle at 10% 20%,
      color-mix(in oklab, var(--foreground), white 92%) 2px,
      transparent 2px
    ), radial-gradient(circle at 30% 70%, color-mix(in oklab, var(--foreground), white 92%) 2px, transparent 2px),
    radial-gradient(circle at 70% 40%, color-mix(in oklab, var(--foreground), white 92%) 2px, transparent 2px),
    radial-gradient(circle at 85% 80%, color-mix(in oklab, var(--foreground), white 92%) 2px, transparent 2px);
  background-size: 220px 220px, 260px 260px, 300px 300px, 280px 280px;
  background-repeat: repeat;
}
.bg-quest-map::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: linear-gradient(90deg, transparent, color-mix(in oklab, var(--primary), white 65%), transparent);
  background-size: 40% 2px;
  mix-blend-mode: overlay;
  animation: quest-path 8s linear infinite;
  opacity: 0.25;
}
@keyframes quest-path {
  0% {
    background-position: 0% 20%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 80%;
  }
}

/* 2) XP bar background: subtle top bar fill loop */
.bg-xp-bar {
  position: relative;
}
.bg-xp-bar::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  height: 6px;
  background: color-mix(in oklab, var(--accent), white 40%);
  box-shadow: 0 0 12px color-mix(in oklab, var(--accent), white 30%);
  transform-origin: left center;
  animation: xp-fill 10s ease-in-out infinite;
  opacity: 0.35;
}
@keyframes xp-fill {
  0% {
    transform: scaleX(0);
  }
  90% {
    transform: scaleX(1);
  }
  100% {
    transform: scaleX(0);
  }
}

/* 3) Falling coins/xp orbs */
.bg-coins {
  position: relative;
  overflow: hidden;
}
.bg-coins::before {
  content: "";
  position: fixed;
  inset: -10% -10% -10% -10%;
  pointer-events: none;
  background-image: radial-gradient(
      circle,
      color-mix(in oklab, rgb(var(--color-accent-reward)), white 15%) 35%,
      transparent 36%
    ), radial-gradient(circle, color-mix(in oklab, rgb(var(--color-accent-reward)), white 10%) 35%, transparent 36%),
    radial-gradient(circle, color-mix(in oklab, rgb(var(--color-accent-reward)), white 20%) 35%, transparent 36%);
  background-size: 12px 12px, 10px 10px, 8px 8px;
  background-position: 10% -10%, 50% -20%, 80% -15%;
  animation: coins-fall 14s linear infinite;
  opacity: 0.12;
  filter: drop-shadow(0 0 4px color-mix(in oklab, rgb(var(--color-accent-reward)), white 30%));
}
@keyframes coins-fall {
  0% {
    background-position: 10% -10%, 50% -20%, 80% -15%;
  }
  100% {
    background-position: 10% 110%, 50% 120%, 80% 115%;
  }
}

/* 4) Retro pixel study scene (soft scrolling pixel accents) */
.bg-pixel-study {
  position: relative;
  background-color: color-mix(in oklab, var(--background), black 6%);
}
.bg-pixel-study::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image: linear-gradient(transparent 98%, color-mix(in oklab, var(--foreground), white 92%) 2%),
    linear-gradient(90deg, transparent 98%, color-mix(in oklab, var(--foreground), white 92%) 2%);
  background-size: 24px 24px, 24px 24px;
  opacity: 0.05;
  animation: pixel-scroll 40s linear infinite;
}
@keyframes pixel-scroll {
  0% {
    background-position: 0 0, 0 0;
  }
  100% {
    background-position: 100% 0, 0 100%;
  }
}

/* 5) Level-up aura (soft pulsating radial glow) */
.bg-level-aura {
  background: radial-gradient(60% 60% at 50% 40%, color-mix(in oklab, var(--primary), white 90%), transparent 70%),
    var(--background);
  animation: aura 12s ease-in-out infinite;
}
@keyframes aura {
  0%,
  100% {
    background-size: 60% 60%, auto;
    filter: brightness(1);
  }
  50% {
    background-size: 70% 70%, auto;
    filter: brightness(1.02);
  }
}

/* typewriter + interactive hover utilities for study sections */
.typewriter {
  --caret: var(--foreground);
  display: inline-block;
  border-right: 2px solid var(--caret);
  white-space: nowrap;
  overflow: hidden;
  animation: typing 3.2s steps(32, end), blink 0.9s step-end infinite;
}
.typewriter.slower {
  animation: typing 4.2s steps(36, end), blink 0.9s step-end infinite;
}
@keyframes typing {
  from {
    width: 0;
  }
  to {
    width: 100%;
  }
}
@keyframes blink {
  0%,
  100% {
    border-color: transparent;
  }
  50% {
    border-color: var(--caret);
  }
}

.hover-raise {
  transition: transform 200ms ease, box-shadow 200ms ease;
}
.hover-raise:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 18px color-mix(in oklab, var(--foreground), white 90%);
}

.feature-spec img {
  border-radius: var(--radius);
  border: 1px solid var(--border);
  transition: transform 250ms ease, filter 250ms ease;
}
.feature-spec:hover img {
  transform: scale(1.02);
  filter: saturate(1.05);
}

.feature-spec .title {
  display: inline-flex;
  gap: 0.5rem;
  align-items: center;
}
.feature-spec .title .dot {
  height: 8px;
  width: 8px;
  border-radius: 999px;
  background: var(--accent);
  box-shadow: 0 0 8px color-mix(in oklab, var(--accent), white 40%);
}

.navbar-hero {
  backdrop-filter: saturate(1.2) blur(6px);
  background: color-mix(in oklab, var(--background), black 6%);
  border-bottom: 1px solid var(--border);
}
